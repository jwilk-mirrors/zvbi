2003-10-13      <mschimek@users.sf.net>

	* src/bcd.c, src/bcd.h: Added bcd.c for full precision
	  binary <-> bcd conversion.

2003-10-09      <mschimek@users.sf.net>

	* src/exp-txt.c, src/io-v4l2.c, src/io-v4l2k.c:
	  x86-64 fixes by Gwenole Beauchesne, submitted by
	  Thierry Vignaud of MandrakeSoft.

2003-06-13	<mschimek@users.sf.net>

	* src/teletext.c, src/vt.h: Broke up various large functions
	  using a struct temp to avoid excess parameters. This will
	  become the private portion of a dynamically allocated
	  vbi_page. Column 41 is optional. PDC-A/B parser
	  finished except for query functions. Renamed link
	  functions. Added hyperlink scan for ">>" pattern. Added
	  functions to enumerate navigation and pdc links.
	  Janitorial work.
	* src/teletext.c, src/vt.h (vbi_format_vt_page,
	  vbi_fetch_vt_page): Replaced display_rows, navigation by
	  vbi_format_flags parameter. New options 41 columns,
	  hyperlinks, pdc links.
	* doc/Doxyfile.in: Added src/misc.h source.
	* src/Makefile.am: Added src/misc.h to headers generating
	  libzvbi.h for vbi_bool.
	* src/bcd.h: Const int doesn't inline as expected, switched
	  to #defines. Added vbi_bcd_limit() for PDC routines.
	* src/cache.c, src/cache.h: Cosmetics.
	* src/decoder.c, src/decoder.h: Bit slice inline functions
	  (or templates actually) didn't inline. Seems gcc3 has a
	  limit on inline function size. Switched to #defines. A
	  few simplifications to save space. Added
	  vbi_bit_slicer_new() and vbi_bit_slicer_delete(), struct
	  vbi_bit_slicer will be private.
	* src/decoder.c (vbi_bit_slice): Destination pointer first
	  re memcpy and friends.
	* src/decoder.c (vbi_bit_slicer_init, vbi_bit_slicer_new):
	  Cleaned up parameters and doc.
	* src/decoder.h: vbi_bit_slicer() no longer inline. Added
	  struct vbi_sampling_parameters, will replace public
	  struct vbi_raw_decoder.
	* src/event.h: Added preliminary struct vbi_pdc_selection.
	* src/hamm.c: Removed unused AleVT code. Restored parity
	  vector functions. Simplified unham-24 function.
	* src/hamm.c, src/hamm.h: Renamed error correction functions,
	  most of them are public now. Added Hamming 8/4 encoding
	  function. 16 bit bit-reverse function.
	* src/vbi.h: Preliminary vbi_decode_hook stuff.
	* test/Makefile.am: New regression tests. In C++ to test
	  through a future C++ interface.
	* test/test-bcd.cc, test/test-hamm.cc: Added.
	* test/test-bitslicer.cc: Added, unfinished.

2003-05-20	<mschimek@users.sf.net>

	* src/vbi.c (vbi_classify_page): Removed language parameter.
	  Replaced by vbi_cache_page_language() returning ISO
	  language code.
	* src/lang.c, src/lang.h: Replaced language names in
	  vbi_font_descriptors by ISO 639 language codes.
	* src/event.h: Replaced language names in
	  vbi_program_info by ISO 639 language codes.
	* src/caption.c, src/cc.h: Replaced language names in
	  vbi_program_info by ISO 639 language codes.

2003-05-04	<mschimek@users.sf.net>

	* src/format.h: Added vbi_export_flags.
	* src/exp-txt.c, src/exp-txt.h (vbi_print_page,
	  vbi_print_page_region): Replaced table and rtl parameter
	  by vbi_export_flags. Added italic control code.
	* src/exp-gfx.c, src/exp-gfx.h (vbi_draw_vt_page,
	  vbi_draw_vt_page_region): Replaced reveal and flash_on
	  parameter by vbi_export_flags.
	* src/caption.c (vbi_decode_caption):
	  s/pthread_mutex_unlock/pthread_mutex_lock.

2003-05-02	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Missed one of Tom's fixes.
	* src/io-v4l2.c: Ported io-v4l2k.c fixes.

2003-04-26	<mschimek@users.sf.net>

	* src/decoder.c: Refactored and cleaned up bit slicer.
	  Refactored raw decoder, namly CPR1204 CRC.
	* src/export.c, src/export.h: Added vbi_iconv helper
	  functions to better hide the nasty details of UCS-2
	  conversion.
	* src/exp-html.c: Const correction, use vbi_iconv.
	* src/exp-txt.c, src/exp-txt.h (vbi_print_page_region):
	  Improved interface. Default format UTF-8, custom and
	  iconv'ed line separator, rtl option. Untested.
	* src/exp-txt.c, src/exp-txt.h (vbi_print_page):
	  De-inlined for interface compatibility.
	* src/exp-txt.c: Consider wchar_t, use vbi_iconv,
	  cleanup.
        * src/format.h: vbi_char.reserved became pdc link flag.
	  Correct types for pgno, subno in vbi_page, unsigned
	  rows, columns.
	* src/hamm.c, src/hamm.h (vbi_hamm24): Const correction.
	* src/hamm.h: Enabled i686 parity check optimization
	  (use parity status flag, no branch). Const corrections.
	* src/misc.h: Missing brackets in PARENT macro. Target
	  cpu check for code optimization. ANSI-C versions of
	  GCC optimized helper macros.
	* src/packet.c: s/pagenum/vt_pagenum.
	* src/teletext.c: Improved PDC-A decoder, updated PDC-B
	  decoder. No user interface yet.
	* src/teletext.c: Rudimentary private vbi_page, some
	  internal interface simplifications and cleanups.
	* src/teletext.c (enhance): Extracted subfunctions,
	  a major porting obstacle.
	* src/vt.h: Cleanups.

2003-04-26	<mschimek@users.sf.net>

	* src/decoder.c (vbi_raw_decoder_add_services): There was
	  a bug in the loop across the pattern array which caused
	  heap corruption. Fix by Tom Zoerner. He also added some
	  debug output, for now conditionally compiled in.
	* src/decoder.c  (vbi_raw_decoder_remove_services): In the
	  pattern array job indices were not adapted. Fix by Tom.
	* src/io-v4l.c (set_parameters): ioctl(VIDIOCSVBIFMT)
	  result EINVAL led to a FALSE result value and regardless
	  of the "strict" level to an abort. Actually EINVAL must
	  be expected. Fix by Tom.
	* src/io-v4l.c (v4l_new): v->dec.offset default values for
	  scanning == 625 were refused by vbi_raw_decoder_add_services().
	  Changed to be identical to the 525 case. Fix by Tom.
	  See zapping-misc 2003-04-23 for details.

2003-04-17	<mschimek@users.sf.net>

	* src/Makefile.am: Autogenerate version.h.
	* src/vbi.c, src/vbi.h: Added vbi_version(). 

2003-03-05	<mschimek@users.sf.net>

	* src/exp-txt.c, src/exp-txt.h: Improved vbi_print_page(),
	  vbi_print_page_region(). Added a separator parameter, linefeed
	  separator translates to desired format (e.g. UCS-2),
	  right-to-left scanning supported now. Export also iconv-erts
	  terminal control codes and linefeeds.
	* src/hamm.c, src/hamm.h: const/unsigned corrections.

2003-03-01	<mschimek@users.sf.net>

	* src/bcd.h (vbi_bcd2dec, vbi_dec2bcd): Changed precision to
	  four bcd digits.
	* src/bcd.h: Added vbi_sub_bcd(), vbi_neg_bcd(), 64-bit clean.
	* test/cpptest.cc: Added bcd test routines, rudimentary C++
	  interface.

2003-02-15	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Fixed video standard detection.

2003-02-12	<mschimek@users.sf.net>

	* src/videodev2k.h: Updated.
	* src/Makefile.am: Fixed improper linking of unicode
	  library, not listed in libzvbi.la dependencies.

2003-01-05	<garetxe@users.sf.net>

	* po/it.po: Update by Pino Toscano.
	* po/es.po: Update.

2002-12-14	<mschimek@users.sf.net>

	* src/event.h: Wrong assumption on char signedness.

2002-12-14	<garetxe@users.sf.net>

	* it.po: Italian translation, contributed by Pino Toscano.

2002-12-08	<mschimek@users.sf.net>

	* Branch 0.3.
	* src/misc.h: Added. vbi_pgno and vbi_subno are now unsigned,
	  vbi_nuid is 64 bit with different semantics.
	* src/cache.c, src/cache.h: Rewrote to cache multiple stations
	  with a memory usage limit. Unref'ing pages didn't do much before,
	  but is important now. New public functions vbi_cache_max_size
	  and vbi_cache_max_stations.

2002-11-28	<mschimek@users.sf.net>

	* Release 0.2.3.

2002-11-28	<mschimek@users.sf.net>

	* src/exp-vtx.c: Segv due to excess read of variable size
	  cached page structure. Patch #643211 by Art Pogoda.

2002-10-21	<mschimek@users.sf.net>

	* src: A few char* were not const typed.

2002-10-17	<mschimek@users.sf.net>

	* src/io-v4l2k.c, src/videodev2k.h,
	  src/io.h (vbi_capture_v4l2k_new): Added. V4l2 api revision
	  2002-10 for Linux 2.5 (untested, have to wait for drivers :-).
	* src/io-v4l2.c: Added fallback to v4l2k.c.
	* src/io-bktr.c: Added interface to FreeBSD/OpenBSD/NetBSD
	  bktr driver. Seems to work, more or less (bug or feature?).
	* src/export.c (vbi_ucs2be): Fixed format name UCS-2 (not UCS2).
	* test (getopt_long): Added fallback to getopt for non-GNU
	  systems.
	* configure.in: New *BSD and getopt_long test.

2002-10-15	<mschimek@users.sf.net>

	* src/event.h, src/ure.h: s/stdint.h/inttypes.h/ for BSD.
	* configure.in, src/Makefile.am, test/Makefile.am:
	  -lpthread only on Linux.
	* src/io_v4l.c, src/io_v4l2.c: Did not compile when
	  v4l/v4l2 disabled.

2002-10-11	<mschimek@users.sf.net>

	* src/packet.c, test/capture.c: Wrong assumption on char signedness.
	* src/trigger.c (parse_atvef): Fix in type identification.

2002-10-07	<mschimek@users.sf.net>

	* src/exp-gfx.c (vbi_draw_vt_page_region): Flash fix. Zapping
	  not affected.

2002-10-04	<mschimek@users.sf.net>

	* Release 0.2.2.

2002-10-01	<mschimek@users.sf.net>

	* m4: Removed gtk-doc.m4, no longer needed.
	* Makefile.am: m4 in the dist. Thought it's unnecessary, but what
	  the heck, it's not that much.
	* configure.in, test: Added two checks.

2002-09-28	<mschimek@users.sf.net>

	* po/fr.po: Updated by Christian Marillat.

2002-09-26	<mschimek@users.sf.net>

	* src/export.c, src/export.h, src/io.h, src/teletext.c: gettext()
	  fix, should have been dgettext(). Oops.
	* src/wss.c: Aspect ratio event reported incorrect 16:9 anamorphic
	  aspect 16/9, changed to 3/4.

2002-07-30	<mschimek@users.sf.net>

	* src/cache.c: Fixed buffer overflow (SRTL bug).
	* src/exp-txt.c: Fixed double spaces and double height
	  row bug in vbi_print_page_region().
	* src/lang.c: Prime Hebrew won't fix, they transmit language
	  code 0x00 English. Suggest per page language menu, for now
	  added 0x80 entry in vbi_font_descriptors.
	* Prime CNI won't fix, they registered one but don't transmit.
	  Another candidate for TODO #011.
	* src/decoder.c: Increased MAX_WAYS to fix ./osc --sim --pal
	  identification of CC-625.

2002-07-04	<mschimek@users.sf.net>

	* doc, src: Switched to Doxygen.

2002-06-22	<mschimek@users.sf.net>

	* doc/Makefile.am: Modified to permit building libzvbi in
	  a separate directory.
	* src/Makefile.am: Forgot to escape extern "C".
	* src/export.h: Removed C++ reserved export identifier.

2002-06-17	<mschimek@users.sf.net>

	* m4, po, config.rpath: Added because cannot use autogen.sh
	  gettextize --force since gettext 0.11. The fine hack insists
	  on updating already updated Makefile.am's and configure.in.
	* po/Rules-quot: s/PACKAGE VERSION/... because msgfmt complains.

2002-06-17  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add m4.
	(SUBDIRS): Remove intl.
	(ACLOCAL_AMFLAGS): New variable.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add m4/Makefile.

2002-06-14	<mschimek@users.sf.net>

	* doc/zdoc-scan: Fix re zapping-Bugs-568052. 

2002-06-13	<mschimek@users.sf.net>

	* src/export.c: vbi_export_info_keyword() cuts option string off the
	  keyword, a convenience.

2002-06-08	<mschimek@users.sf.net>

	* src/packet.c: #if fix.
	* zvbi.spec.in: Removed libunicode requirement.
	* Release 0.2.1.

2002-05-23	<mschimek@users.sf.net>

	* macros/autogen.sh: Updated.
	* Release 0.2.

2002-05-20	<mschimek@users.sf.net>

	* configure.in: Inherit env CFLAGS.
	* teletext.c: Triggers a GCC 3.1 bug, do export CFLAGS=-V3.0.4

2002-04-28	<mschimek@users.sf.net>

	* src/packet.c, src/vbi.h, src/event.h: Added Page Format - Clear
	  (ETS 300 708) decoder. Future stuff.
	* src/teletext.c: Some work towards PDC preselection.

2002-04-20	<mschimek@users.sf.net>

	* src/vbi.c, src/event.h: New handler functions identifying handler by
	  func ptr and user data.
	* src/ure.c: If possible use glibc 2.1 wchar_t instead of
	  libunicode.

2002-04-18	<mschimek@users.sf.net>

	* src/io.c, src/io.h, src/io-v4l.c, src/io-v4l2.c: Added function
	  to retrieve fd.
	* contrib: Added x11font by Gerd Knorr.
	* configure.in: Added contrib/Makefile.

2002-04-16	<mschimek@users.sf.net>

	* src/caption.c: Corrected string length assertion in xds_decoder.

2002-04-13	<mschimek@users.sf.net>

	* Corrected a few typographical errors in the docs.

2002-04-11	<mschimek@users.sf.net>

	* src/io-v4l2.c: Gerd Knorr says bttv 0.8.x needs O_RDWR to
	  PROT_WRITE. Nyquist check was missing.
	* test/capture.c: Gerd found missing timeval init. Miracle
	  how it worked up to this point remains unsolved.

2002-04-09	<mschimek@users.sf.net>

	* src/caption.c: Added ASCII range check before Unicode txl,
	  re zapping-misc 2002-04-09.

2002-04-01	Release 0.1.1 <mschimek@users.sf.net>

	* po/de.po: Updated.
	* po/es.po: Updated by I? G. Etxebarria.
	* po/pl.po: Updated by Pawel Sakowski.
	* Removed the version number from the library name,
	  was a bad idea.

2002-03-19	Christian Marillat

	* po/fr.po: Updated.

2002-03-19	<mschimek@users.sf.net>

	* src/io-v4l.c: Read loop fix, restored pthread_testcancel();
	  (still needed despite select()?), ETIME not ignored.
	* src/io-v4l2.c: Read loop fix, pthread_testcancel();
	* Changes suggested by gcc 3.0.4.

2002-03-16	<mschimek@users.sf.net>

	* src/Makefile.am: Automated libzvbi.h version #defines.

2002-03-10	zapping-Bugs-527984 <mschimek@users.sf.net>

	* src/io-v4l2.c: Added mmap PROT_READ | PROT_WRITE for
	  bttv 0.8.x.

2002-03-09	Bugfix <mschimek@users.sf.net>

	* src/search.c: Fixed pattern highlighting, used to still
	  skip gfx although now searchable. Segv in reverse search.
	* src/export-txt.c: vbi_print_page_region() return TRUE
	  instead of actual bytes written.

2002-03-02	Misc <mschimek@users.sf.net>

	* src/bcd.h: Extended vbi_add_bcd() and vbi_is_bcd() from
	  3 to 8 digits.
	* src/export.c: strncpy() fix in vbi_export_invalid_option().
	* Dropped the libunicode requirement. Is only needed for
	  ure.c which is needed by search.c. Search is now disabled
	  when unicode is not installed.

2002-02-08	I/O stuff <mschimek@users.sf.net>

	* src/io-v4l.c: Enabled select() for bttv.

2002-01-19	Fixes <mschimek@users.sf.net>

	* src/io.c: vbi_capture_delete() not NULL safe, corrected.
	* src/search.c: Fixed non-regexp mode escape bug.
	* src/ure.c: Added character classes :gfx: and :drcs:.
	* src/exp-gfx.c: Fixed DRCS display.
	* src/exp-txt.c: Fixed color reset (VT100).

2002-01-17	V4L, build fixes <garetxe@users.sf.net>

	* src/io_v4l.c: Added missing pixfmt initialization.
	Works great after that, great job.
	* Makefile.am, configure.in: Some build fixes.

2002-01-14	Restored V4L interface, more test stuff, fixes <mschimek@users.sf.net>

	* src/io_v4l.c: Added, *untested*.
	* test/osc: Try v4l2, then v4l.
	* po: Updated.
	* src/hamm.c: Corrected char types (use char only for
	  text, these are ints).
	* src/export.c: Bugfix in option_string(), didn't
	  accept '-' and '_' in option keywords.
	* test/capture.c: Added, from old vbi_decoder().
	* test/sim.c: Ditto, plus new Teletext simulation.
	* test: Updated, misc small improvements.

2002-01-13	Fixes <mschimek@users.sf.net>

	* test/explist.h: Option type check.
	* doc/tmpl/sliced.sgml: Corrected .gif names.
	* src/export.c: Fixed vbi_export_option_menu_set(), didn't check
	  for entry < 0.

2002-01-12	Imported libzvbi into Zapping CVS <mschimek@users.sf.net>

	* Renamed to libzvbi to avoid a name conflict. VBI is an ubiquitious
	  acronym and there are at least two other libvbi's around.
	* libzvbi.h: Now generated at compile time, so we can keep public
	  and private definitions together, autodocs are filtered out.
	  Added version #defines.
	* Separated bcd.h, event.h, search.h. Removed os.h.
	* Prefixed vbi_ and VBI_ a few remaining symbols, attr_stuff became
	  vbi_stuff and fmt_page vbi_page. Purpose to avoid name conflicts
	  since we're going public.
	* New vbi_char (former attr_char) encodes characters as Unicode
	  to improve interoperability. Translation TTX/CC->Unicode in
	  decoder, Unicode->glyph in export functions. This affects TTX
	  combined glyphs, now only those covered by U+00A0 to U+017F
	  can be decoded and displayed. Future Latin Ext-B?
	* exp_gfx.c: Changed PPM color depth from 4 to 8 bits. PNG export
	  now works with Closed Caption pages.
	* exp_html.c: Teletext G1/G3 substituting and Network name in
	  title doesn't exist anymore, XXX should be restored.
	* exp-txt.c: vbi_print_page replaced the string module used for
	  cut&paste. ANSI/ASCII modules dropped, the new text module
	  supports a larger number of character encodings. Improved color
	  and ANSI/VT100 or VT200 sequences.
	* export.c: Upgraded the api to that used by rte 0.5+, which
	  descended from here, so we have roughly the same everywhere.
	* teletext.c: NLSed TOP index page.
	* tables.c: Stripped the country table to what's actually needed,
	  removed the station short names we never used.
	* cache.c: Added vbi_unref_page().
	* v4lx.c: Completely replaced by a more generic version.
	* Copied libzvbi .po entries from Zapping here.
	* Added /test with various verification utilities.
	* Added gtk-doc and wrote some autodocs.

2001-11-01	Standalone libvbi <mschimek@users.sf.net>

	* Extracted libvbi from Zapping <http://zapping.sf.net>, added
	  Makefiles and stuff.

Local Variables:
mode: change-log
coding: utf-8
left-margin: 8
fill-column: 76
End:
