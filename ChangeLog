2003-10-20	<mschimek@users.sf.net>

	* configure.in, Makefile.am, src/Makefile.am, daemon:
	  Proxy code is not ready for release, moved to a separate
	  branch.
	* Cleanup.

2003-10-16	<mschimek@users.sf.net>

	* src/bcd.h (vbi_dec2bcd, vbi_bcd2dec, vbi_add_bcd,
	  vbi_is_bcd): Corrected documentation. 

2003-10-14      <mschimek@users.sf.net>

	* src/packet.c, src/trigger.c: Fixed unsafe use of strncpy.
	* daemon/zvbid.init.in: Added. Just an example for
	  packagers, I cannot create an init script for each distro
	  out there.
	* daemon/Makefile.am: Changed target ./proxyd to
	  @sbindir@/zvbid. 'proxyd' was a bit too general. 

2003-10-09      <mschimek@users.sf.net>

	* src/exp-txt.c, src/io-v4l2.c, src/io-v4l2k.c:
	  x86-64 fixes by Gwenole Beauchesne, submitted by
	  Thierry Vignaud of MandrakeSoft.

2003-06-07      <tomzo@users.sf.net>

        Periodic check-in for ongoing proxy implementation:
        * src/proxy-msg.c: Optimized client/server message I/O via socket.
        * daemon/proxyd.c: Added command line option -kill; Added devfs
          support (use /dev/v4l/vbi as default device if it exists.)
        Note: Changes in protocol require re-compilation of proxy clients.

2003-06-01      <tomzo@users.sf.net>

        Periodic check-in for ongoing proxy implementation:
        * src/io-proxy.c: Redesigned internal message handling, i.e. switched
          from an event-driven model to a synchronous, RPC-like model. Also
          added TV channel change RPC.
        * daemon/proxyd.c: Started implementation of server-side TV channel
          switching (still incomplete: switching works, but scheduling and
          notifications are missing.)
        * src/io-v4l.c, io-v4l2k.c, io.c, io.h: Implemented TV channel switch.
        * io-v4l2k.c: Added optional support for preliminary ioctl S_CHNPRIO
          (with #ifdef USE_V4L2K_CHNPRIO)
        * test/proxy-test.c: Added tests for TV channel switching: new command
          line options -channel, -freq, -chnprio

2003-05-24      <tomzo@users.sf.net>

        Periodic check-in for ongoing proxy implementation:
        * daemon/proxyd.c: allow multiple -dev arguments on the command line
          and serve all the given devices through multiple sockets in /tmp;
          added support for v4l drivers without select() by using threads to
          block in read(); handle SERVICE_REQ messages from proxy clients to
          support add_service() capture interface in io-proxy.c
        * src/io-proxy.c: Implemented new capture interfaces: add_services()
          and added get_poll_fd(), prepared flush()
        * src/io.c, src/io-v4l.c, io-v4l2.c, io-v4l2k.c: Added v4l_get_poll_fd()
          to return file handle only if driver supports poll() and select()
        * test/proxy-test.c: Added dynamic service switch to test add_service()
          interface: new function; added new service closed caption.

2003-05-17      <tomzo@users.sf.net>

        * src/io.c: Added new interface function vbi_capture_add_services();
          also prepared for new interface function vbi_capture_flush()
        * src/io-v4l.c, io-v4l2.c, io-v4l2k.c: Implemented new interface
          add_services(): add one or more services to an already initialized
          capture context; large internal changes, but existing interface
          functions should remain fully backwards compatible; also prepared
          for new interface function flush()
	* src/decoder.c: added new interface functions, required by io.c's
          new add_services(): vbi_raw_decoder_resize() to adapt for VBI
          geometry changes and vbi_raw_decoder_check_services() to check
          which of the given services can be decoded with current parameters
        * daemon/proxyd.c: uses new IO API function vbi_capture_add_services()

2003-05-10      <tomzo@users.sf.net>

        * daemon/proxyd.c: bugfix: busy loop until the first client connect
          unless -nodetach option was used; also added copying of group and
          permissions from VBI device onto named socket path
        * daemon/README: added TODO list
        * src/io-proxy.c: bugfix proxy_read(): loop around select() until a
          complete VBI frame is received or timeout expired; before the
          function returned 0 when only a partial message was received,
          falsely indicating a timeout to the caller

2003-05-04	<mschimek@users.sf.net>

	* src/caption.c (vbi_decode_caption):
	  s/pthread_mutex_unlock/pthread_mutex_lock.

2003-05-03      <tomzo@users.sf.net>

        * src/proxy-msg.c: follow synlinks in given device paths to allow
          both /dev/vbi and /dev/vbi0 to work as proxy device args
        * test/proxy-test.c: use vbi_capture_pull_sliced() instead of
          vbi_capture_read_sliced()
        * src/io.h: added declaration of vbi_capture_proxy_new() for
          inclusion in libzvbi.h

2003-05-02	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Missed one of Tom's fixes.
	* src/io-v4l2.c: Ported io-v4l2k.c fixes.

2003-04-26	<mschimek@users.sf.net>

	Added proxy daemon by Tom Zoerner:
	* test/Makefile.am: Added proxy-test target.
	* test: Added proxy-test.c
	* src/Makefile.am: Added proxy targets.
	* src: Added io-proxy.c, proxy-msg.c, proxy-msg.h.
	* Added daemon dir (since we need a different Makefile.am),
	  added Makefile.am, proxyd.c, README.
	* Makefile.am: Added daemon subdir.
	* configure.in: Added --disable-proxy switch and daemon/Makefile.

2003-04-26	<mschimek@users.sf.net>

	* src/decoder.c (vbi_raw_decoder_add_services): There was
	  a bug in the loop across the pattern array which caused
	  heap corruption. Fix by Tom Zoerner. He also added some
	  debug output, for now conditionally compiled in.
	* src/decoder.c (vbi_raw_decoder_remove_services): In the
	  pattern array job indices were not adapted. Fix by Tom.
	* src/io-v4l.c (set_parameters): ioctl(VIDIOCSVBIFMT)
	  result EINVAL led to a FALSE result value and regardless
	  of the "strict" level to an abort. Actually EINVAL must
	  be expected. Fix by Tom.
	* src/io-v4l.c (v4l_new): v->dec.offset default values for
	  scanning == 625 were refused by vbi_raw_decoder_add_services().
	  Changed to be identical to the 525 case. Fix by Tom.
	  See zapping-misc 2003-04-23 for details.

2003-02-17	<mschimek@users.sf.net>

	* src/vbi.c, src/vbi.h: Added vbi_version(). 
	
2003-02-16	<mschimek@users.sf.net>

	* Release 0.2.4.

2003-02-15	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Fixed video standard detection.

2003-02-12	<mschimek@users.sf.net>

	* src/videodev2k.h: Updated.
	* src/Makefile.am: Fixed improper linking of unicode
	  library, not listed in libzvbi.la dependencies.

2003-01-05	<garetxe@users.sf.net>

	* po/it.po: Update by Pino Toscano.
	* po/es.po: Update.

2002-12-14	<mschimek@users.sf.net>

	* src/event.h: Wrong assumption on char signedness.

2002-12-14	<garetxe@users.sf.net>

	* it.po: Italian translation, contributed by Pino Toscano.

2002-11-28	<mschimek@users.sf.net>

	* Release 0.2.3.

2002-11-28	<mschimek@users.sf.net>

	* src/exp-vtx.c: Segv due to excess read of variable size
	  cached page structure. Patch #643211 by Art Pogoda.

2002-10-21	<mschimek@users.sf.net>

	* src: A few char* were not const typed.

2002-10-17	<mschimek@users.sf.net>

	* src/io-v4l2k.c, src/videodev2k.h,
	  src/io.h (vbi_capture_v4l2k_new): Added. V4l2 api revision
	  2002-10 for Linux 2.5 (untested, have to wait for drivers :-).
	* src/io-v4l2.c: Added fallback to v4l2k.c.
	* src/io-bktr.c: Added interface to FreeBSD/OpenBSD/NetBSD
	  bktr driver. Seems to work, more or less (bug or feature?).
	* src/export.c (vbi_ucs2be): Fixed format name UCS-2 (not UCS2).
	* test (getopt_long): Added fallback to getopt for non-GNU
	  systems.
	* configure.in: New *BSD and getopt_long test.

2002-10-15	<mschimek@users.sf.net>

	* src/event.h, src/ure.h: s/stdint.h/inttypes.h/ for BSD.
	* configure.in, src/Makefile.am, test/Makefile.am:
	  -lpthread only on Linux.
	* src/io_v4l.c, src/io_v4l2.c: Did not compile when
	  v4l/v4l2 disabled.

2002-10-11	<mschimek@users.sf.net>

	* src/packet.c, test/capture.c: Wrong assumption on char signedness.
	* src/trigger.c (parse_atvef): Fix in type identification.

2002-10-07	<mschimek@users.sf.net>

	* src/exp-gfx.c (vbi_draw_vt_page_region): Flash fix. Zapping
	  not affected.

2002-10-04	<mschimek@users.sf.net>

	* Release 0.2.2.

2002-10-01	<mschimek@users.sf.net>

	* m4: Removed gtk-doc.m4, no longer needed.
	* Makefile.am: m4 in the dist. Thought it's unnecessary, but what
	  the heck, it's not that much.
	* configure.in, test: Added two checks.

2002-09-28	<mschimek@users.sf.net>

	* po/fr.po: Updated by Christian Marillat.

2002-09-26	<mschimek@users.sf.net>

	* src/export.c, src/export.h, src/io.h, src/teletext.c: gettext()
	  fix, should have been dgettext(). Oops.
	* src/wss.c: Aspect ratio event reported incorrect 16:9 anamorphic
	  aspect 16/9, changed to 3/4.

2002-07-30	<mschimek@users.sf.net>

	* src/cache.c: Fixed buffer overflow (SRTL bug).
	* src/exp-txt.c: Fixed double spaces and double height
	  row bug in vbi_print_page_region().
	* src/lang.c: Prime Hebrew won't fix, they transmit language
	  code 0x00 English. Suggest per page language menu, for now
	  added 0x80 entry in vbi_font_descriptors.
	* Prime CNI won't fix, they registered one but don't transmit.
	  Another candidate for TODO #011.
	* src/decoder.c: Increased MAX_WAYS to fix ./osc --sim --pal
	  identification of CC-625.

2002-07-04	<mschimek@users.sf.net>

	* doc, src: Switched to Doxygen.

2002-06-22	<mschimek@users.sf.net>

	* doc/Makefile.am: Modified to permit building libzvbi in
	  a separate directory.
	* src/Makefile.am: Forgot to escape extern "C".
	* src/export.h: Removed C++ reserved export identifier.

2002-06-17	<mschimek@users.sf.net>

	* m4, po, config.rpath: Added because cannot use autogen.sh
	  gettextize --force since gettext 0.11. The fine hack insists
	  on updating already updated Makefile.am's and configure.in.
	* po/Rules-quot: s/PACKAGE VERSION/... because msgfmt complains.

2002-06-17  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add m4.
	(SUBDIRS): Remove intl.
	(ACLOCAL_AMFLAGS): New variable.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add m4/Makefile.

2002-06-14	<mschimek@users.sf.net>

	* doc/zdoc-scan: Fix re zapping-Bugs-568052. 

2002-06-13	<mschimek@users.sf.net>

	* src/export.c: vbi_export_info_keyword() cuts option string off the
	  keyword, a convenience.

2002-06-08	<mschimek@users.sf.net>

	* src/packet.c: #if fix.
	* zvbi.spec.in: Removed libunicode requirement.
	* Release 0.2.1.

2002-05-23	<mschimek@users.sf.net>

	* macros/autogen.sh: Updated.
	* Release 0.2.

2002-05-20	<mschimek@users.sf.net>

	* configure.in: Inherit env CFLAGS.
	* teletext.c: Triggers a GCC 3.1 bug, do export CFLAGS=-V3.0.4

2002-04-28	<mschimek@users.sf.net>

	* src/packet.c, src/vbi.h, src/event.h: Added Page Format - Clear
	  (ETS 300 708) decoder. Future stuff.
	* src/teletext.c: Some work towards PDC preselection.

2002-04-20	<mschimek@users.sf.net>

	* src/vbi.c, src/event.h: New handler functions identifying handler by
	  func ptr and user data.
	* src/ure.c: If possible use glibc 2.1 wchar_t instead of
	  libunicode.

2002-04-18	<mschimek@users.sf.net>

	* src/io.c, src/io.h, src/io-v4l.c, src/io-v4l2.c: Added function
	  to retrieve fd.
	* contrib: Added x11font by Gerd Knorr.
	* configure.in: Added contrib/Makefile.

2002-04-16	<mschimek@users.sf.net>

	* src/caption.c: Corrected string length assertion in xds_decoder.

2002-04-13	<mschimek@users.sf.net>

	* Corrected a few typographical errors in the docs.

2002-04-11	<mschimek@users.sf.net>

	* src/io-v4l2.c: Gerd Knorr says bttv 0.8.x needs O_RDWR to
	  PROT_WRITE. Nyquist check was missing.
	* test/capture.c: Gerd found missing timeval init. Miracle
	  how it worked up to this point remains unsolved.

2002-04-09	<mschimek@users.sf.net>

	* src/caption.c: Added ASCII range check before Unicode txl,
	  re zapping-misc 2002-04-09.

2002-04-01	Release 0.1.1 <mschimek@users.sf.net>

	* po/de.po: Updated.
	* po/es.po: Updated by I? G. Etxebarria.
	* po/pl.po: Updated by Pawel Sakowski.
	* Removed the version number from the library name,
	  was a bad idea.

2002-03-19	Christian Marillat

	* po/fr.po: Updated.

2002-03-19	<mschimek@users.sf.net>

	* src/io-v4l.c: Read loop fix, restored pthread_testcancel();
	  (still needed despite select()?), ETIME not ignored.
	* src/io-v4l2.c: Read loop fix, pthread_testcancel();
	* Changes suggested by gcc 3.0.4.

2002-03-16	<mschimek@users.sf.net>

	* src/Makefile.am: Automated libzvbi.h version #defines.

2002-03-10	zapping-Bugs-527984 <mschimek@users.sf.net>

	* src/io-v4l2.c: Added mmap PROT_READ | PROT_WRITE for
	  bttv 0.8.x.

2002-03-09	Bugfix <mschimek@users.sf.net>

	* src/search.c: Fixed pattern highlighting, used to still
	  skip gfx although now searchable. Segv in reverse search.
	* src/export-txt.c: vbi_print_page_region() return TRUE
	  instead of actual bytes written.

2002-03-02	Misc <mschimek@users.sf.net>

	* src/bcd.h: Extended vbi_add_bcd() and vbi_is_bcd() from
	  3 to 8 digits.
	* src/export.c: strncpy() fix in vbi_export_invalid_option().
	* Dropped the libunicode requirement. Is only needed for
	  ure.c which is needed by search.c. Search is now disabled
	  when unicode is not installed.

2002-02-08	I/O stuff <mschimek@users.sf.net>

	* src/io-v4l.c: Enabled select() for bttv.

2002-01-19	Fixes <mschimek@users.sf.net>

	* src/io.c: vbi_capture_delete() not NULL safe, corrected.
	* src/search.c: Fixed non-regexp mode escape bug.
	* src/ure.c: Added character classes :gfx: and :drcs:.
	* src/exp-gfx.c: Fixed DRCS display.
	* src/exp-txt.c: Fixed color reset (VT100).

2002-01-17	V4L, build fixes <garetxe@users.sf.net>

	* src/io_v4l.c: Added missing pixfmt initialization.
	Works great after that, great job.
	* Makefile.am, configure.in: Some build fixes.

2002-01-14	Restored V4L interface, more test stuff, fixes <mschimek@users.sf.net>

	* src/io_v4l.c: Added, *untested*.
	* test/osc: Try v4l2, then v4l.
	* po: Updated.
	* src/hamm.c: Corrected char types (use char only for
	  text, these are ints).
	* src/export.c: Bugfix in option_string(), didn't
	  accept '-' and '_' in option keywords.
	* test/capture.c: Added, from old vbi_decoder().
	* test/sim.c: Ditto, plus new Teletext simulation.
	* test: Updated, misc small improvements.

2002-01-13	Fixes <mschimek@users.sf.net>

	* test/explist.h: Option type check.
	* doc/tmpl/sliced.sgml: Corrected .gif names.
	* src/export.c: Fixed vbi_export_option_menu_set(), didn't check
	  for entry < 0.

2002-01-12	Imported libzvbi into Zapping CVS <mschimek@users.sf.net>

	* Renamed to libzvbi to avoid a name conflict. VBI is an ubiquitious
	  acronym and there are at least two other libvbi's around.
	* libzvbi.h: Now generated at compile time, so we can keep public
	  and private definitions together, autodocs are filtered out.
	  Added version #defines.
	* Separated bcd.h, event.h, search.h. Removed os.h.
	* Prefixed vbi_ and VBI_ a few remaining symbols, attr_stuff became
	  vbi_stuff and fmt_page vbi_page. Purpose to avoid name conflicts
	  since we're going public.
	* New vbi_char (former attr_char) encodes characters as Unicode
	  to improve interoperability. Translation TTX/CC->Unicode in
	  decoder, Unicode->glyph in export functions. This affects TTX
	  combined glyphs, now only those covered by U+00A0 to U+017F
	  can be decoded and displayed. Future Latin Ext-B?
	* exp_gfx.c: Changed PPM color depth from 4 to 8 bits. PNG export
	  now works with Closed Caption pages.
	* exp_html.c: Teletext G1/G3 substituting and Network name in
	  title doesn't exist anymore, XXX should be restored.
	* exp-txt.c: vbi_print_page replaced the string module used for
	  cut&paste. ANSI/ASCII modules dropped, the new text module
	  supports a larger number of character encodings. Improved color
	  and ANSI/VT100 or VT200 sequences.
	* export.c: Upgraded the api to that used by rte 0.5+, which
	  descended from here, so we have roughly the same everywhere.
	* teletext.c: NLSed TOP index page.
	* tables.c: Stripped the country table to what's actually needed,
	  removed the station short names we never used.
	* cache.c: Added vbi_unref_page().
	* v4lx.c: Completely replaced by a more generic version.
	* Copied libzvbi .po entries from Zapping here.
	* Added /test with various verification utilities.
	* Added gtk-doc and wrote some autodocs.

2001-11-01	Standalone libvbi <mschimek@users.sf.net>

	* Extracted libvbi from Zapping <http://zapping.sf.net>, added
	  Makefiles and stuff.

Local Variables:
mode: change-log
coding: utf-8
left-margin: 8
fill-column: 76
End:
