2008-08-22    <mschimek@users.sf.net>

	* zvbi/ttx_page_stat.h, zvbi/ttx_decoder.c: Renamed a few
	  vbi_ttx_page_type identifiers from _PAGE to _DATA to clarify these
	  pages are not displayable.

	* examples/teletext.c: Added TOPText support.

	* zvbi/ttx_decoder.c (default_color_map): Changed the private
	  colors back to pure RGB 1:1:1.
	* zvbi/ttx.h: Struct ttx_lop: s/have_flof/have_fastext.
	* zvbi/ttx_page.c, zvbi/ttx_decoder.h: Added
	  vbi_ttx_page_get_top_title(), vbi_ttx_page_get_nav_link().
	  Renamed vbi_ttx_page_get_link() to vbi_ttx_page_get_ed_link().
	  Those are editorial links, as opposed to Fastext, TOPText,
	  PDC and in-page hyperlinks.
	* zvbi/link.h, zvbi/link.c: Added _vbi_ttx_link_new() for
	  ttx_page.c.
	* zvbi/ttx_decoder.h, zvbi/ttx_page.c
	(_vbi_ttx_page_from_cache_page_va): Replaced formatting option
	  VBI_NAVIGATION by VBI_FASTEXT and VBI_TOPTEXT.
	* zvbi/ttx_page.c: Restored and rewrote Fastext and TOPText
	  navigation. Removed TOP style 2. Restored
	  vbi_ttx_page_get_top_title().
	* zvbi/ttx_page-priv.h: Restored the internal navigation links.
	* zvbi/ttx_decoder.c, zvbi/ttx_decoder.h: Added
	  vbi_ttx_decoder_get_top_titles(),

	* zvbi/misc.h: _vbi_shrink_vector_capacity() interface changed.
	* zvbi/misc.c (_vbi_shrink_vector_capacity) 
	(_vbi_grow_vector_capacity): Restored for vbi_top_title.c.
	* zvbi/zvbi.h: Added top_title.h.
	* zvbi/Makefile.am (INSTALLHDRS): Added top_title.h.
	(libzvbi_0_3_la_SOURCES): Added top_title.c, top_title.h,
	  top_title-priv.h.
	* zvbi/ttx_page.c, zvbi/cache-priv.h: Changed the
	  _vbi_ttx_charset_init() function because writing into an array is
	  unsafe.
	* zvbi/error.h: Added VBI_ERR_BAD_PAGE, VBI_ERR_NO_LINK,
	  VBI_ERR_NO_TOP_TITLE, VBI_ERR_INVALID_ARG.
	* src/top_title.c, src/top_title.h: Moved into zvbi/.
	* zvbi/top_title-priv.h: Added.
	* zvbi/top_title.c, zvbi/top_title.h: Moved here from src/, cleaned
	  up, added allocation functions.
	
	* zvbi/link.c: Doxumented the public functions.
	* zvbi/network.c: Doxumentation tweaks.

	* zvbi/network.c (vbi_network_copy): Clear reserved fields.
	
2008-08-20    <mschimek@users.sf.net>

	* zvbi/page.h: Removed declaration of non-existing vbi_page_new().

	* zvbi/ttx_page-priv.h, zvbi/dvb_demux.h: Added function
	  __attributes__.

	* src/link.c, src/link.h: Moved into zvbi/.

	* zvbi/zvbi.h: Added link.h.
	* zvbi/ttx_decoder.h, zvbi/ttx_page.c: Rewrote and enabled
	  vbi_ttx_page_get_link().
	* zvbi/network.h: Don't need bcd.h.
	* zvbi/network.h, zvbi/network.c: Added allocation functions
	  for link.c and ttx_page.c.
	(vbi_network_set_name): NULL name fix.
	* zvbi/misc.h: Added TIME_MAX for link.c expiration_time.
	* zvbi/error.h: Added VBI_ERR_INVALID_LINK_TYPE.
	* zvbi/link.c, zvbi/link.h: Moved here from src/, cleaned up,
	  added allocation functions.
	* zvbi/Makefile.am: Added link.c, link.h.

	* examples/teletext.c: Added Fastext button support.
	(x_key_0_9): Page 8xx fix.
	(x_event): Reveal fix.

2008-08-19    <mschimek@users.sf.net>

	* zvbi/ttx_page.c (enhance): Function restored, except for
	  the PDC stuff.

	* zvbi/page.h: s/VBI_TRANSPARENT_FULL/VBI_TRANSPARENT.

	* zvbi/image_format.h (vbi_pixfmt): Replaced VBI_PIXFMT_PAL8 by
	  VBI_PIXFMT_STATIC_8 and VBI_PIXFMT_PSEUDO_8.
	* zvbi/exp-gfx.h (vbi_export_option): Added VBI_ALPHA.
	* zvbi/exp-gfx.c (vbi_ttx_page_draw_region_va): Made alpha
	  channel optional. Added support for VBI_PIXFMT_STATIC_8
	  and VBI_PIXFMT_PSEUDO_8.
	* examples/teletext.c: Added VBI_PIXFMT_STATIC_8,
	  VBI_PIXFMT_PSEUDO_8 test.

	* examples/Makefile.am (LDADD): Link with static libzvbi as in
	  test/ for easier debugging.

	* examples/teletext.c: Added.

	* m4/autogen.sh: Replaced by the newer version from branch
	  0.2.

	* examples/Makefile.am (noinst_PROGRAMS): Added teletext.c,
	  removed the other programs until that code moves back into the
	  library.
	* examples/wss.c, examples/rawout.c, examples/network.c:
	  Updated the zvbi.h include path.
	* zvbi-0.3.pc.in (includedir): We now install the libzvbi
	  headers in a zvbi-0.3 directory.
	* test/test-headers: Library moved from src to zvbi directory.
	* test/test-hamm.cc: vbi_ prefixes changed.
	* test/test-bcd.cc: Moved the C++ interface here from
	  src/bcd.h.
	* test/Makefile.am: Disabled most of the tests and test
	  tools until the tested code moves back into the library.
	(LDADD): Library moved from src to zvbi directory.
	* Makefile.am: 
	* src, zvbi: In the future instead of a single libzvbi.h
	  file we will install individual header files in a zvbi
	  directory. The first batch of files now moved from src
	  to zvbi so we can change the include path in the public
	  header files. Changed the preliminary vbi3_ prefixes back
	  to vbi_, made a few other cosmetic changes, removed
	  or commented out code which isn't quite ready yet, and
	  made a few steps to better error handling.

	* configure.in: Updated, changed version to 0.3.1, .so
	  version to 0.0.0.
	(AC_OUTPUT): Removed doc (for now) and src Makefile. 
	
2008-02-27    <mschimek@users.sf.net>

	* src/vps.h, src/vps.c, src/sliced_filter.h:
	* src/sliced_filter.c, src/pfc_demux.h, src/pfc_demux.c:
	* src/page_table.h, src/page_table.c, src/intl-priv.h:
	* src/io-sim.h, src/io-sim.c, src/idl_demux.c:
	* src/idl_demux.h: Updated from branch 0.2. Changed license
	  to LGPLv2+.

	* src/packet_filter.c: Replaced by sliced_filter.c.
	* src/Makefile.am (INSTALLHDRS): Removed packet_filter.h, was
	  replaced by sliced_filter.h.

	* src/hammgen.c, src/hamm-tables.h: Copied src/hammgen.c
	  generator of src/hamm-tables.h from branch 0.2.
	* src/hamm.h, src/hamm.c, src/dvb_mux.h, src/dvb_mux.c: 
	* src/dvb_demux.h, src/dvb_demux.c, src/dlist.h: Updated from
	  branch 0.2. Changed the license to LGPLv2+.

	* src/dvb.h, src/conv.h, src/conv.c: Changed the license
	  to LGPLv2+.

2008-02-26    <mschimek@users.sf.net>

	* test/test-hamm.cc: Updated from branch 0.2.

	* src/network-table.h: Updated from TS 101 231 rev. 2008-02.

	* src/cache.h (vbi3_ttx_page_stat): Include sys/time.h to
	  declare struct timeval.
	(vbi3_format_option): ISO C89 does not permit a
	  comma at the end of an enumerator list.

	* src/Makefile.am (INSTALLHDRS): Added packet_filter.h.
	(version.h, zvbi.h): Prepend a "generated file" warning.
	(network-table.h): Restored the rule.
	(icheck): Was replaced by test/test-headers.

	* src/vt.h: Added ttx_page_function_valid() and
	  ttx_page_coding_valid() helpers for src/teletext_decoder.c. 

	* src/top_title.c, src/teletext_decoder.c:
	* src/teletext_decoder-priv.h, src/teletext.c, src/page-priv.h: 
	  Various type and field names changed in src/vt.h.

	* src/cache.h, src/cache.c, src/cache-priv.h, src/vt.h:
	  Updated from branch 0.2. Changed the license to LGPLv2+.

	* src/bit_slicer.h, src/bit_slicer.c: Changed the license to
	  LGPLv2+.

2008-02-25    <mschimek@users.sf.net>

	* src/zvbi.h: Include packet_filter.h.

	* test/unicode-out-ref.txt: Copied from branch 0.2, except for
	  Teletext national subset character Turkish Lira, for
	  test/test-unicode.

	* test/unicode.c: Updated from branch 0.2.

	* test/test-unicode, test/test-dvb_demux.cc: Copied from branch 0.2.

	* test/Makefile.am: Added strict ISO C89, C94, C99, and C++98
	  checks of the libzvbi header. Added uclist to noinst_SCRIPTS.
	(TESTS): Added test-dvb_demux, test-unicode.
	(EXTRA_DIST): Added unicode-out-ref.txt.
	(CLEANFILES): Added unicode-out.txt.

	* test/ctest.c, test/cpptest.cc: Cleaned up.
	* test/ctest.c: New file for strict ISO C89, C94 and C99 check
	  of the libzvbi header.

	* src/xds_decoder.c: Replaced UNUSED macro by _vbi_unused from
	  macros.h.

	* src/program_info.h: ISO C89 does not permit C++ line comments.

	* src/export.h: Did not declare ssize_t.

	* src/event.h: ISO C89 does not permit empty structures.

	* src/ure.c, src/sampling_par.c, src/raw_decoder.c, src/lang.h: 
	* src/io-v4l.c, src/hamm.h, src/exp-gfx.c, src/dvb_mux.c: 
	* src/dvb_demux.c, src/dlist.h, src/cache.c, src/cache-priv.h:
	* src/bcd.h: Renamed vbi3_inline to _vbi3_inline.
	* test/test-common.h, src/xds_demux.h, src/vps.h:
	* src/vbi_decoder.h, src/top_title.h, src/teletext_decoder.h:
	* src/sliced_filter.h, src/sliced.h, src/search.h:
	* src/sampling_par.h, src/pfc_demux.h, src/pdc.h:
	* src/page_table.h, src/page.h, src/packet_filter.h:
	* src/packet-830.h, src/network.h, src/misc.h, src/link.h: 
	* src/lang.h, src/idl_demux.h, src/hamm.h, src/image_format.h: 
	* src/export.h, src/export-priv.h, src/exp-txt.h, src/exp-gfx.h: 
	* src/dvb_mux.h, src/dvb_demux.h, src/conv.h: 
	* src/caption_decoder.h, src/cache.h, src/bit_slicer.h:
	* src/bcd.h: Rewrote the GCC __attribute__ wrapper macros for
	  compatibility with strict ISO C.

	* src/bcd.h (_VBI3_BCD_10, _VBI3_BCD_06, VBI3_BCD_BIN_MAX):
	  Rewrote the defines for compatibility with ISO C89.

	* src/xds_demux.h, src/sampling_par.h, src/raw_decoder.h:
	* src/pdc.h, src/page.h, src/network.h, src/macros.h: 
	* src/image_format.h, src/event.h, src/io.h, src/cache.h: 
	* src/aspect_ratio.h: ISO C89 does not permit a comma at the
	  end of an enumerator list.

	* configure.in: Updated from branch 0.2, adding a gcc -std check
	  for test/ctest.c and test/cpptest.cc.

	* src/macros.h: Updated from branch 0.2. The GCC __attribute__
	  wrapper macros changed for compatibility with strict ISO C.
	  The license changed to LGPLv2+.

	* autogen-maint.sh: Copied from branch 0.2.

2005-06-30    <mschimek@users.sf.net>

	* src/structpr.pl: Didn't log VIDIOC_G|S_STD.

2004-05-12    <mschimek@users.sf.net>

	* m4/autogen.sh: Fixed non-Posix-ness of head args,
	  reported by St√©phane Loeuillet.

2004-02-25    <mschimek@users.sf.net>

	* test/explist.c: dcgettext no longer necessary. 
	* test/glyph.c, test/unicode.c: Use now public library functions to
	  convert Teletext to Unicode.
	* test/decode.c: New file.
	* test/capture.c: Replaced VPS code by new library routines, moved
	  some code into decode.c.
	  (main): Added VBI_SLICED_VPS_F2 to output services. 
	* test/Makefile.am: New file decode.c.
	* src/xds.c (vbi_decode_xds_impulse_capture_id),
	  src/vps.c (vbi_decode_vps_pdc): Added missing PDC (8302) flags.
	* src/search.c, src/search.h: s/vbi_search_new/vbi_search_ucs2_new.
	  Added vbi_search_utf8_new() which takes search string in UTF-8
	  instead of UCS-2 encoding.  
	  (vbi_search_next, vbi_search_next_va_list): Now takes Teletext
	  page formatting options like vbi_format_vt_page(). Some doc
	  and type fixes.
	* src/pdc.h (VBI_PIL_MINUTE): Fixed.
	  (vbi_program_id): Added mising PDC flags.
	* src/pdc.c (vbi_program_id_dump):
	* src/pdc.h (vbi_program_id_dump): Added.
	* src/vbi.h, src/packet.c, src/packet-pfc.c, src/packet-pfc.h:
	  Moved page format clear demux code into packet-pfc.c, packet-pfc.h.
	* src/vt.h, src/packet.c, src/teletext.c: New Teletext page
	  formatting option to set a default character set, another
	  to override completely. vbi_teletext_set_default_region()
	  obsolete now.
	* src/network.c, src/network.h: Station names in struct vbi_network
	  now in locale encoding instead of Latin-1. Country codes now
	  client visible. Added country code from call sign. Added PDC-A
	  CNI. CNI table updates.
	* src/lang.c, src/lang.h: Teletext character set table now client
	  accessible. Restored ASCII art replacement for Teletext gfx chars.
	  Teletext and Closed Caption to Unicode functions now public.
	* src/exp-txt.c, src/exp-html.c: Added export option to convert
	  Teletext gfx chars to ASCII art.
	* src/export.h, src/export.c, src/exp-vtx.c,
	  src/exp-txt.c, src/exp-templ.c, src/exp-html.c, src/exp-gfx.c,
	  Simplified the internal export interface. Const pointer fixes.
	  Modifications for internal l10n of strings, no more dcgettext in
	  clients necessary.
	* src/exp-gfx.c (unicode_wstfont2_special): Replaced private code
	  for Turkish currency sign (0xE800) by 0x20A4, 'LIRA SIGN Italy,
	  Turkey' according to Unicode 3.1.
	* src/event.h: struct pfc_block moved into new file packet-pfc.h.
	* src/teletext.c, src/exp-gfx.c, src/exp-txt.c, src/exp-html.c,
	  src/misc.h, src/format.h, src/caption.c:
	  Replaced vbi_char flags bitfield by int. Bitfields are nice but
	  difficult to port. Added COPY_SET_MASK, COPY_SET_COND helper macros
	  to misc.h.
	* src/caption.c (vbi_caption_color_level): vbi_transp_colomap
	  obsolete, this is now implemented in export functions.
	* src/Makefile.am: New files.
	* doc/Doxyfile, doc/Doxyfile.in: New files.

2004-02-18    <mschimek@users.sf.net>

	* test/export.c: Test link callbacks. 
	* src/vt.h: Magic numbers instead of 0++ for format options, less
	  likely to be confused with incorrect parameters.
	* src/vbi.c, src/vbi.h: (vbi_transp_colormap, vbi_set_brightness,
	  vbi_set_contrast): Removed. Brightness and contrast are export
	  module options now. 
	* src/teletext.c (vbi_page_character_set): New function for
	  html export since pg->font moved into vbi_page_private.
	  (hyperlinks): Fixed.
	  (top_index, vbi_format_vt_page_va_list): Replaced
	  vbi_transp_colormap by straight copy, brightness and contrast
	  change now in export modules.
	* src/packet.c (vbi_convert_raw_page, vbi_convert_cached_page):
	  vt_page copy size fix, tnx to valgrind. 
	* src/misc.h: Moved NLS definitions into iconv.h.
	* src/format.h: Replaced export flags by option va_list.
	* src/export.c, src/export.h: Moved _zvbi_intl_domainname and iconv
	  routines into iconv.c. Added callback interface for link export
	  (currently supported for html only).
	* src/exp-txt.c, src/exp-txt.h: Added output buffer and faster
	  single pass iconv. iconv to file moved into iconv.c.
	  (vbi_print_page_region, vbi_print_page): Replaced export flags
	  by option va_list. Added vbi_print_page_region_va_list(),
	  vbi_print_page_va_list().
	  (export): Translate color map in advance.
	* src/exp-html.c: Rewrote with output buffer, added link
	  callbacks. Replaced different charsets by UTF-8 with faster inline
	  conversion.
	* src/exp-gfx.c, src/exp-gfx.h:
	  (vbi_rgba_conv): Added brightness, contrast parameters. 
	  (vbi_draw_cc_page_region, vbi_draw_cc_page): Replaced export flags
	  by option va_list. Added brightness, contrast options. Added
	  vbi_draw_cc_page_region_va_list(),
	  vbi_draw_cc_page_va_list(). vbi_draw_vt_page* see
	  vbi_draw_cc_page*.
	* src/Makefile.am: New files conv.c, conv.h. 

2004-02-13    <mschimek@users.sf.net>

	* xds.c, xds.h: New file. XDS code moved here from caption.c. New
	  vbi_xds_demux interface. New public functions to decode various
	  XDS packets.
	* vps.c, vps.h: New file. Existing VPS code moved here from
	  packet.c. New public functions to decode various parts of a
	  VPS packet.
	* pdc.c, pdc.h: New file. New vbi_pil type with helper macros. New
	  vbi_program_id for VPS, PDC, XDS VCR triggers. New
	  vbi_preselection for PDC A/B VPT. New functions to resolve PDC
	  link, traverse PDC table.
	* network.c, network.h: New file. Nuid and vbi_network stuff moved
	  here. Changed vbi_nuid type. New enum vbi_cni_type. New functions
	  to convert between CNI and nuid, to create nuids, to brake down
	  nuids.
	* network.c: Moved CNI tables from tables.c here.
	* graphics.c: New file. Pixfmt code moved here from sampling.c.
	* graphics.h: New file. Pixfmt definitions moved here from
	  sampling.h. Added vbi_image_format. Merged
	  vbi_pixfmt_bytes_per_pixel function and macro.
	* fontgen.c: Tool to prepare fonts for exp-gfx.c.
	* test/export.c: Command line format options, dump PDC data option. 
	* test/caption.c (draw_row): vbi_draw_cc_page_region() changed.
	* src/ccfont2.xbm: Replaced by ccfont3.pbm (which is much
	  smaller), xbm for inclusion in exp-gfx.c will be created by
	  fontconv at compile time. Changed character size from frame
	  to field.
	* src/wstfont2.xbm: Replaced by wstfont2.pbm (which is much
	  smaller), xbm for inclusion in exp-gfx.c will be created by
	  fontconv at compile time.
	* src/teletext.c: Moved most PDC code into pdc.c, pdc.h. s/struct
	  temp/vbi_page_private. Added vbi_page allocation code. Replaced
	  format flags by format option va_list. Cleaned up a bit. 
	* src/tables.c, src/tables.h: Moved CNI table into network.c.
	* src/search.c: s/vbi_page/vbi_page_private.
	* src/sampling.c, src/sampling.h: Moved pixfmt code into graphics.c,
	  graphics.h.
	* src/packet.c: Moved station lookup code into network.c,
	  network.h. Moved PDC code into pdc.c, pdc.h. Moved VPS code into
	  vps.c, vps.h.
	  (eacem_trigger): s/vbi_page/vbi_page_private.
	* src/packet.c, src/packet.h (page_function_name, object_type_name):
	  New enum to string function for teletext.c progress logging.
	* src/misc.h: Preliminary nuid stuff moved into network.h. 
	* src/format.h: text array in vbi_page was too small, fixed. DRCS
	  pointers and various private fields moved into vbi_page_private
	  parent structure. For clarity drcs_clut now defined as vbi_color
	  table. New VBI_SCALE (line doubling) export flag. 
	* src/export.c (initialze): Graphics export restored. 
	* src/exp-gfx.c: init_gfx() removed, fonts are now prepared at
	  compile time. CC font now single field, added line doubling option
	  instead. Rewrote drawing functions for output in all RGB pixel
	  formats.
	* src/exp-gfx.c, src/exp-gfx.h: Cleaned up vbi_draw
	  interface. Removed deprecated vbi_get_max_rendered_size().
	* src/event.h: Moved struct vbi_network into network.h. 
	* src/caption.c, src/caption.h: Moved XDS decoder into xds.c, xds.h.
	  Use new vbi_xds_demux interface. 
	* src/cache.c, src/cache.h: vbi_cache_ref() added to create new
	  reference on existing page in teletext.c.
	  (vbi_unref_page): Obsolete.
	* src/bit_slicer.c, src/sampling.c, test/test-raw_decoder.cc: Merged
	  vbi_pixfmt_bytes_per_pixel function and macro.  
	* src/Makefile.am: New font conversion tool, various new files.

2004-01-24    <mschimek@users.sf.net>

	* src/bcd.c (vbi_dec2bcd): __builtin_expect fix.
	* src/bcd.h (VBI_BCD_DEC_MIN): Fixed.
	  (vbi_dec2bcd, vbi_bcd2dec): Permit const optimization.
	  (vbi_bcd_limit): Renamed to vbi_bcd_vec_greater for
	  clarity, reversed return value. 
	* src/hamm.c, src/hamm.h: Appended -p to functions taking
	  a pointer argument. Added vbi_rev16(), vbi_fpar8(). Changed
	  vbi_fham8, vbi_iham8 macros to inline functions for proper
	  type checking.
	* src/packet.c: hamm.h changes.
	* src/bcd.c, src/bcd.h: Some doc clarifications.
	* src/bit_slicer.c, src/bit_slicer.h: Separated from
	  decoder.c. struct vbi_bit_slicer now private. Renamed
	  vbi_bit_slice vbi_bit_slicer_slice, added vbi_bit_slicer_fn type.
	  (vbi_bit_slicer_init, vbi_bit_slicer_new): More parameters,
	  plausibility checks with error log, support more pixel formats.
	* src/raw_decoder.c, src/raw_decoder.h: Separated from
	  decoder.c, integrated Tom's proxy branch changes.
	  struct vbi_raw_decoder now private, sampling parameters
	  moved into struct vbi_sampling_par. Proper typing of service set.
	  Added new, delete and dump functions. Added functions to get and
	  set sampling parameters (replaces Tom's vbi_raw_decoder_resize()).
	  Functions vbi_raw_decoder_parameters and
	  vbi_raw_decoder_check_services now in sampling.c as
	  vbi_sampling_par_from_services and
	  vbi_sampling_par_check_services. Renamed vbi_raw_decode to
	  vbi_raw_decoder_decode. Added error logging as suggested.
	* src/sampling.c, src/sampling.h: Separated from decoder.c. New
	  struct vbi_sampling_par, was part of vbi_raw_decoder. New
	  function vbi_sampling_par_verify, based on Tom's changes.
	  Functions vbi_raw_decoder_parameters and
	  vbi_raw_decoder_check_services moved here as
	  vbi_sampling_par_from_services and
	  vbi_sampling_par_check_services. Replaced scanning 525/625 by
	  proper video standard identifier based on tveng code. Extended
	  vbi_pixfmt, also based on tveng code.
	* src/io-sim.c, src/io-sim.h: Moved signal simulation from
	  test/sim.c here. Extended to cover more Teletext formats and
	  pixel formats. Temporarily removed CPR1204, probably broken.
	* src/misc.h: New macros for pure and const func optimization.
	  Added vbi_log_printf().
	* src/sliced.h: Added missing Teletext service identifiers, VPS
	  field 2, service set type (preliminary). New helper functions
	  vbi_sliced_name, vbi_sliced_payload_bits.
 	* src/vbi.c, src/vbi.h: Added logging functions.
	* src/vt.h: misc.h changes.
	* src/Makefile.am: New files.
	* test/test-raw_decoder.cc: Added.
	* test/Makefile.am: Added test-raw_decoder.cc.
	
2003-10-13      <mschimek@users.sf.net>

	* src/bcd.c, src/bcd.h: Added bcd.c for full precision
	  binary <-> bcd conversion.

2003-10-09      <mschimek@users.sf.net>

	* src/exp-txt.c, src/io-v4l2.c, src/io-v4l2k.c:
	  x86-64 fixes by Gwenole Beauchesne, submitted by
	  Thierry Vignaud of MandrakeSoft.

2003-06-13	<mschimek@users.sf.net>

	* src/teletext.c, src/vt.h: Broke up various large functions
	  using a struct temp to avoid excess parameters. This will
	  become the private portion of a dynamically allocated
	  vbi_page. Column 41 is optional. PDC-A/B parser
	  finished except for query functions. Renamed link
	  functions. Added hyperlink scan for ">>" pattern. Added
	  functions to enumerate navigation and pdc links.
	  Janitorial work.
	* src/teletext.c, src/vt.h (vbi_format_vt_page,
	  vbi_fetch_vt_page): Replaced display_rows, navigation by
	  vbi_format_flags parameter. New options 41 columns,
	  hyperlinks, pdc links.
	* doc/Doxyfile.in: Added src/misc.h source.
	* src/Makefile.am: Added src/misc.h to headers generating
	  libzvbi.h for vbi_bool.
	* src/bcd.h: Const int doesn't inline as expected, switched
	  to #defines. Added vbi_bcd_limit() for PDC routines.
	* src/cache.c, src/cache.h: Cosmetics.
	* src/decoder.c, src/decoder.h: Bit slice inline functions
	  (or templates actually) didn't inline. Seems gcc3 has a
	  limit on inline function size. Switched to #defines. A
	  few simplifications to save space. Added
	  vbi_bit_slicer_new() and vbi_bit_slicer_delete(), struct
	  vbi_bit_slicer will be private.
	* src/decoder.c (vbi_bit_slice): Destination pointer first
	  re memcpy and friends.
	* src/decoder.c (vbi_bit_slicer_init, vbi_bit_slicer_new):
	  Cleaned up parameters and doc.
	* src/decoder.h: vbi_bit_slicer() no longer inline. Added
	  struct vbi_sampling_parameters, will replace public
	  struct vbi_raw_decoder.
	* src/event.h: Added preliminary struct vbi_pdc_selection.
	* src/hamm.c: Removed unused AleVT code. Restored parity
	  vector functions. Simplified unham-24 function.
	* src/hamm.c, src/hamm.h: Renamed error correction functions,
	  most of them are public now. Added Hamming 8/4 encoding
	  function. 16 bit bit-reverse function.
	* src/vbi.h: Preliminary vbi_decode_hook stuff.
	* test/Makefile.am: New regression tests. In C++ to test
	  through a future C++ interface.
	* test/test-bcd.cc, test/test-hamm.cc: Added.
	* test/test-bitslicer.cc: Added, unfinished.

2003-05-20	<mschimek@users.sf.net>

	* src/vbi.c (vbi_classify_page): Removed language parameter.
	  Replaced by vbi_cache_page_language() returning ISO
	  language code.
	* src/lang.c, src/lang.h: Replaced language names in
	  vbi_font_descriptors by ISO 639 language codes.
	* src/event.h: Replaced language names in
	  vbi_program_info by ISO 639 language codes.
	* src/caption.c, src/cc.h: Replaced language names in
	  vbi_program_info by ISO 639 language codes.

2003-05-04	<mschimek@users.sf.net>

	* src/format.h: Added vbi_export_flags.
	* src/exp-txt.c, src/exp-txt.h (vbi_print_page,
	  vbi_print_page_region): Replaced table and rtl parameter
	  by vbi_export_flags. Added italic control code.
	* src/exp-gfx.c, src/exp-gfx.h (vbi_draw_vt_page,
	  vbi_draw_vt_page_region): Replaced reveal and flash_on
	  parameter by vbi_export_flags.
	* src/caption.c (vbi_decode_caption):
	  s/pthread_mutex_unlock/pthread_mutex_lock.

2003-05-02	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Missed one of Tom's fixes.
	* src/io-v4l2.c: Ported io-v4l2k.c fixes.

2003-04-26	<mschimek@users.sf.net>

	* src/decoder.c: Refactored and cleaned up bit slicer.
	  Refactored raw decoder, namly CPR1204 CRC.
	* src/export.c, src/export.h: Added vbi_iconv helper
	  functions to better hide the nasty details of UCS-2
	  conversion.
	* src/exp-html.c: Const correction, use vbi_iconv.
	* src/exp-txt.c, src/exp-txt.h (vbi_print_page_region):
	  Improved interface. Default format UTF-8, custom and
	  iconv'ed line separator, rtl option. Untested.
	* src/exp-txt.c, src/exp-txt.h (vbi_print_page):
	  De-inlined for interface compatibility.
	* src/exp-txt.c: Consider wchar_t, use vbi_iconv,
	  cleanup.
        * src/format.h: vbi_char.reserved became pdc link flag.
	  Correct types for pgno, subno in vbi_page, unsigned
	  rows, columns.
	* src/hamm.c, src/hamm.h (vbi_hamm24): Const correction.
	* src/hamm.h: Enabled i686 parity check optimization
	  (use parity status flag, no branch). Const corrections.
	* src/misc.h: Missing brackets in PARENT macro. Target
	  cpu check for code optimization. ANSI-C versions of
	  GCC optimized helper macros.
	* src/packet.c: s/pagenum/vt_pagenum.
	* src/teletext.c: Improved PDC-A decoder, updated PDC-B
	  decoder. No user interface yet.
	* src/teletext.c: Rudimentary private vbi_page, some
	  internal interface simplifications and cleanups.
	* src/teletext.c (enhance): Extracted subfunctions,
	  a major porting obstacle.
	* src/vt.h: Cleanups.

2003-04-26	<mschimek@users.sf.net>

	* src/decoder.c (vbi_raw_decoder_add_services): There was
	  a bug in the loop across the pattern array which caused
	  heap corruption. Fix by Tom Zoerner. He also added some
	  debug output, for now conditionally compiled in.
	* src/decoder.c  (vbi_raw_decoder_remove_services): In the
	  pattern array job indices were not adapted. Fix by Tom.
	* src/io-v4l.c (set_parameters): ioctl(VIDIOCSVBIFMT)
	  result EINVAL led to a FALSE result value and regardless
	  of the "strict" level to an abort. Actually EINVAL must
	  be expected. Fix by Tom.
	* src/io-v4l.c (v4l_new): v->dec.offset default values for
	  scanning == 625 were refused by vbi_raw_decoder_add_services().
	  Changed to be identical to the 525 case. Fix by Tom.
	  See zapping-misc 2003-04-23 for details.

2003-04-17	<mschimek@users.sf.net>

	* src/Makefile.am: Autogenerate version.h.
	* src/vbi.c, src/vbi.h: Added vbi_version(). 

2003-03-05	<mschimek@users.sf.net>

	* src/exp-txt.c, src/exp-txt.h: Improved vbi_print_page(),
	  vbi_print_page_region(). Added a separator parameter, linefeed
	  separator translates to desired format (e.g. UCS-2),
	  right-to-left scanning supported now. Export also iconv-erts
	  terminal control codes and linefeeds.
	* src/hamm.c, src/hamm.h: const/unsigned corrections.

2003-03-01	<mschimek@users.sf.net>

	* src/bcd.h (vbi_bcd2dec, vbi_dec2bcd): Changed precision to
	  four bcd digits.
	* src/bcd.h: Added vbi_sub_bcd(), vbi_neg_bcd(), 64-bit clean.
	* test/cpptest.cc: Added bcd test routines, rudimentary C++
	  interface.

2003-02-15	<mschimek@users.sf.net>

	* src/io-v4l2k.c: Fixed video standard detection.

2003-02-12	<mschimek@users.sf.net>

	* src/videodev2k.h: Updated.
	* src/Makefile.am: Fixed improper linking of unicode
	  library, not listed in libzvbi.la dependencies.

2003-01-05	<garetxe@users.sf.net>

	* po/it.po: Update by Pino Toscano.
	* po/es.po: Update.

2002-12-14	<mschimek@users.sf.net>

	* src/event.h: Wrong assumption on char signedness.

2002-12-14	<garetxe@users.sf.net>

	* it.po: Italian translation, contributed by Pino Toscano.

2002-12-08	<mschimek@users.sf.net>

	* Branch 0.3.
	* src/misc.h: Added. vbi_pgno and vbi_subno are now unsigned,
	  vbi_nuid is 64 bit with different semantics.
	* src/cache.c, src/cache.h: Rewrote to cache multiple stations
	  with a memory usage limit. Unref'ing pages didn't do much before,
	  but is important now. New public functions vbi_cache_max_size
	  and vbi_cache_max_stations.

2002-11-28	<mschimek@users.sf.net>

	* Release 0.2.3.

2002-11-28	<mschimek@users.sf.net>

	* src/exp-vtx.c: Segv due to excess read of variable size
	  cached page structure. Patch #643211 by Art Pogoda.

2002-10-21	<mschimek@users.sf.net>

	* src: A few char* were not const typed.

2002-10-17	<mschimek@users.sf.net>

	* src/io-v4l2k.c, src/videodev2k.h,
	  src/io.h (vbi_capture_v4l2k_new): Added. V4l2 api revision
	  2002-10 for Linux 2.5 (untested, have to wait for drivers :-).
	* src/io-v4l2.c: Added fallback to v4l2k.c.
	* src/io-bktr.c: Added interface to FreeBSD/OpenBSD/NetBSD
	  bktr driver. Seems to work, more or less (bug or feature?).
	* src/export.c (vbi_ucs2be): Fixed format name UCS-2 (not UCS2).
	* test (getopt_long): Added fallback to getopt for non-GNU
	  systems.
	* configure.in: New *BSD and getopt_long test.

2002-10-15	<mschimek@users.sf.net>

	* src/event.h, src/ure.h: s/stdint.h/inttypes.h/ for BSD.
	* configure.in, src/Makefile.am, test/Makefile.am:
	  -lpthread only on Linux.
	* src/io_v4l.c, src/io_v4l2.c: Did not compile when
	  v4l/v4l2 disabled.

2002-10-11	<mschimek@users.sf.net>

	* src/packet.c, test/capture.c: Wrong assumption on char signedness.
	* src/trigger.c (parse_atvef): Fix in type identification.

2002-10-07	<mschimek@users.sf.net>

	* src/exp-gfx.c (vbi_draw_vt_page_region): Flash fix. Zapping
	  not affected.

2002-10-04	<mschimek@users.sf.net>

	* Release 0.2.2.

2002-10-01	<mschimek@users.sf.net>

	* m4: Removed gtk-doc.m4, no longer needed.
	* Makefile.am: m4 in the dist. Thought it's unnecessary, but what
	  the heck, it's not that much.
	* configure.in, test: Added two checks.

2002-09-28	<mschimek@users.sf.net>

	* po/fr.po: Updated by Christian Marillat.

2002-09-26	<mschimek@users.sf.net>

	* src/export.c, src/export.h, src/io.h, src/teletext.c: gettext()
	  fix, should have been dgettext(). Oops.
	* src/wss.c: Aspect ratio event reported incorrect 16:9 anamorphic
	  aspect 16/9, changed to 3/4.

2002-07-30	<mschimek@users.sf.net>

	* src/cache.c: Fixed buffer overflow (SRTL bug).
	* src/exp-txt.c: Fixed double spaces and double height
	  row bug in vbi_print_page_region().
	* src/lang.c: Prime Hebrew won't fix, they transmit language
	  code 0x00 English. Suggest per page language menu, for now
	  added 0x80 entry in vbi_font_descriptors.
	* Prime CNI won't fix, they registered one but don't transmit.
	  Another candidate for TODO #011.
	* src/decoder.c: Increased MAX_WAYS to fix ./osc --sim --pal
	  identification of CC-625.

2002-07-04	<mschimek@users.sf.net>

	* doc, src: Switched to Doxygen.

2002-06-22	<mschimek@users.sf.net>

	* doc/Makefile.am: Modified to permit building libzvbi in
	  a separate directory.
	* src/Makefile.am: Forgot to escape extern "C".
	* src/export.h: Removed C++ reserved export identifier.

2002-06-17	<mschimek@users.sf.net>

	* m4, po, config.rpath: Added because cannot use autogen.sh
	  gettextize --force since gettext 0.11. The fine hack insists
	  on updating already updated Makefile.am's and configure.in.
	* po/Rules-quot: s/PACKAGE VERSION/... because msgfmt complains.

2002-06-17  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add m4.
	(SUBDIRS): Remove intl.
	(ACLOCAL_AMFLAGS): New variable.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add m4/Makefile.

2002-06-14	<mschimek@users.sf.net>

	* doc/zdoc-scan: Fix re zapping-Bugs-568052. 

2002-06-13	<mschimek@users.sf.net>

	* src/export.c: vbi_export_info_keyword() cuts option string off the
	  keyword, a convenience.

2002-06-08	<mschimek@users.sf.net>

	* src/packet.c: #if fix.
	* zvbi.spec.in: Removed libunicode requirement.
	* Release 0.2.1.

2002-05-23	<mschimek@users.sf.net>

	* macros/autogen.sh: Updated.
	* Release 0.2.

2002-05-20	<mschimek@users.sf.net>

	* configure.in: Inherit env CFLAGS.
	* teletext.c: Triggers a GCC 3.1 bug, do export CFLAGS=-V3.0.4

2002-04-28	<mschimek@users.sf.net>

	* src/packet.c, src/vbi.h, src/event.h: Added Page Format - Clear
	  (ETS 300 708) decoder. Future stuff.
	* src/teletext.c: Some work towards PDC preselection.

2002-04-20	<mschimek@users.sf.net>

	* src/vbi.c, src/event.h: New handler functions identifying handler by
	  func ptr and user data.
	* src/ure.c: If possible use glibc 2.1 wchar_t instead of
	  libunicode.

2002-04-18	<mschimek@users.sf.net>

	* src/io.c, src/io.h, src/io-v4l.c, src/io-v4l2.c: Added function
	  to retrieve fd.
	* contrib: Added x11font by Gerd Knorr.
	* configure.in: Added contrib/Makefile.

2002-04-16	<mschimek@users.sf.net>

	* src/caption.c: Corrected string length assertion in xds_decoder.

2002-04-13	<mschimek@users.sf.net>

	* Corrected a few typographical errors in the docs.

2002-04-11	<mschimek@users.sf.net>

	* src/io-v4l2.c: Gerd Knorr says bttv 0.8.x needs O_RDWR to
	  PROT_WRITE. Nyquist check was missing.
	* test/capture.c: Gerd found missing timeval init. Miracle
	  how it worked up to this point remains unsolved.

2002-04-09	<mschimek@users.sf.net>

	* src/caption.c: Added ASCII range check before Unicode txl,
	  re zapping-misc 2002-04-09.

2002-04-01	Release 0.1.1 <mschimek@users.sf.net>

	* po/de.po: Updated.
	* po/es.po: Updated by I? G. Etxebarria.
	* po/pl.po: Updated by Pawel Sakowski.
	* Removed the version number from the library name,
	  was a bad idea.

2002-03-19	Christian Marillat

	* po/fr.po: Updated.

2002-03-19	<mschimek@users.sf.net>

	* src/io-v4l.c: Read loop fix, restored pthread_testcancel();
	  (still needed despite select()?), ETIME not ignored.
	* src/io-v4l2.c: Read loop fix, pthread_testcancel();
	* Changes suggested by gcc 3.0.4.

2002-03-16	<mschimek@users.sf.net>

	* src/Makefile.am: Automated libzvbi.h version #defines.

2002-03-10	zapping-Bugs-527984 <mschimek@users.sf.net>

	* src/io-v4l2.c: Added mmap PROT_READ | PROT_WRITE for
	  bttv 0.8.x.

2002-03-09	Bugfix <mschimek@users.sf.net>

	* src/search.c: Fixed pattern highlighting, used to still
	  skip gfx although now searchable. Segv in reverse search.
	* src/export-txt.c: vbi_print_page_region() return TRUE
	  instead of actual bytes written.

2002-03-02	Misc <mschimek@users.sf.net>

	* src/bcd.h: Extended vbi_add_bcd() and vbi_is_bcd() from
	  3 to 8 digits.
	* src/export.c: strncpy() fix in vbi_export_invalid_option().
	* Dropped the libunicode requirement. Is only needed for
	  ure.c which is needed by search.c. Search is now disabled
	  when unicode is not installed.

2002-02-08	I/O stuff <mschimek@users.sf.net>

	* src/io-v4l.c: Enabled select() for bttv.

2002-01-19	Fixes <mschimek@users.sf.net>

	* src/io.c: vbi_capture_delete() not NULL safe, corrected.
	* src/search.c: Fixed non-regexp mode escape bug.
	* src/ure.c: Added character classes :gfx: and :drcs:.
	* src/exp-gfx.c: Fixed DRCS display.
	* src/exp-txt.c: Fixed color reset (VT100).

2002-01-17	V4L, build fixes <garetxe@users.sf.net>

	* src/io_v4l.c: Added missing pixfmt initialization.
	Works great after that, great job.
	* Makefile.am, configure.in: Some build fixes.

2002-01-14	Restored V4L interface, more test stuff, fixes <mschimek@users.sf.net>

	* src/io_v4l.c: Added, *untested*.
	* test/osc: Try v4l2, then v4l.
	* po: Updated.
	* src/hamm.c: Corrected char types (use char only for
	  text, these are ints).
	* src/export.c: Bugfix in option_string(), didn't
	  accept '-' and '_' in option keywords.
	* test/capture.c: Added, from old vbi_decoder().
	* test/sim.c: Ditto, plus new Teletext simulation.
	* test: Updated, misc small improvements.

2002-01-13	Fixes <mschimek@users.sf.net>

	* test/explist.h: Option type check.
	* doc/tmpl/sliced.sgml: Corrected .gif names.
	* src/export.c: Fixed vbi_export_option_menu_set(), didn't check
	  for entry < 0.

2002-01-12	Imported libzvbi into Zapping CVS <mschimek@users.sf.net>

	* Renamed to libzvbi to avoid a name conflict. VBI is an ubiquitious
	  acronym and there are at least two other libvbi's around.
	* libzvbi.h: Now generated at compile time, so we can keep public
	  and private definitions together, autodocs are filtered out.
	  Added version #defines.
	* Separated bcd.h, event.h, search.h. Removed os.h.
	* Prefixed vbi_ and VBI_ a few remaining symbols, attr_stuff became
	  vbi_stuff and fmt_page vbi_page. Purpose to avoid name conflicts
	  since we're going public.
	* New vbi_char (former attr_char) encodes characters as Unicode
	  to improve interoperability. Translation TTX/CC->Unicode in
	  decoder, Unicode->glyph in export functions. This affects TTX
	  combined glyphs, now only those covered by U+00A0 to U+017F
	  can be decoded and displayed. Future Latin Ext-B?
	* exp_gfx.c: Changed PPM color depth from 4 to 8 bits. PNG export
	  now works with Closed Caption pages.
	* exp_html.c: Teletext G1/G3 substituting and Network name in
	  title doesn't exist anymore, XXX should be restored.
	* exp-txt.c: vbi_print_page replaced the string module used for
	  cut&paste. ANSI/ASCII modules dropped, the new text module
	  supports a larger number of character encodings. Improved color
	  and ANSI/VT100 or VT200 sequences.
	* export.c: Upgraded the api to that used by rte 0.5+, which
	  descended from here, so we have roughly the same everywhere.
	* teletext.c: NLSed TOP index page.
	* tables.c: Stripped the country table to what's actually needed,
	  removed the station short names we never used.
	* cache.c: Added vbi_unref_page().
	* v4lx.c: Completely replaced by a more generic version.
	* Copied libzvbi .po entries from Zapping here.
	* Added /test with various verification utilities.
	* Added gtk-doc and wrote some autodocs.

2001-11-01	Standalone libvbi <mschimek@users.sf.net>

	* Extracted libvbi from Zapping <http://zapping.sf.net>, added
	  Makefiles and stuff.

Local Variables:
mode: change-log
coding: utf-8
left-margin: 8
fill-column: 76
End:
